
SED(1)                     BSD General Commands Manual                    SED(1)

ğğ€ğŒğ„
     ğ˜€ğ—²ğ—± â€” stream editor

ğ’ğ˜ğğğğ’ğˆğ’
     ğ˜€ğ—²ğ—± [-ğ—®ğ„ğ—¹ğ—»ğ—¿ğ˜‚] cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ² [fÌ²iÌ²lÌ²eÌ² .Ì².Ì².Ì²]
     ğ˜€ğ—²ğ—± [-ğ—®ğ„ğ—¹ğ—»ğ—¿ğ˜‚] [-ğ—² cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ²] [-ğ—³ cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ²_fÌ²iÌ²lÌ²eÌ²] [-ğˆ[eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ²]]
         [-ğ—¶[eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ²]] [fÌ²iÌ²lÌ²eÌ² .Ì².Ì².Ì²]

ğƒğ„ğ’ğ‚ğ‘ğˆğğ“ğˆğğ
     The ğ˜€ğ—²ğ—± utility reads the specified files, or the standard input if no
     files are specified, modifying the input as specified by a list of comâ€
     mands.  The input is then written to the standard output.

     A single command may be specified as the first argument to ğ˜€ğ—²ğ—±.  Multiple
     commands may be specified by using the -ğ—² or -ğ—³ options.  All commands are
     applied to the input in the order they are specified regardless of their
     origin.

     The following options are available:

     -ğ—®      The files listed as parameters for the â€œwâ€ functions are created
             (or truncated) before any processing begins, by default.  The -ğ—®
             option causes ğ˜€ğ—²ğ—± to delay opening each file until a command conâ€
             taining the related â€œwâ€ function is applied to a line of input.

     -ğ„      Interpret regular expressions as extended (modern) regular expresâ€
             sions rather than basic regular expressions (BRE's).  The
             re_format(7) manual page fully describes both formats.

     -ğ—² cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ²
             Append the editing commands specified by the cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ² argument to
             the list of commands.

     -ğ—³ cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ²_fÌ²iÌ²lÌ²eÌ²
             Append the editing commands found in the file cÌ²oÌ²mÌ²mÌ²aÌ²nÌ²dÌ²_fÌ²iÌ²lÌ²eÌ² to the
             list of commands.  The editing commands should each be listed on a
             separate line.

     -ğˆ[eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ²]
             Edit files in-place, saving backups with the specified eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ².
             If no eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ² is given, no backup will be saved.  It is not recâ€
             ommended to give a zero-length eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ² when in-place editing
             files, as you risk corruption or partial content in situations
             where disk space is exhausted, etc.

             Note that in-place editing with -ğˆ still takes place in a single
             continuous line address space covering all files, although each
             file preserves its individuality instead of forming one output
             stream.  The line counter is never reset between files, address
             ranges can span file boundaries, and the â€œ$â€ address matches only
             the last line of the last file.  (See SÌ²eÌ²dÌ² AÌ²dÌ²dÌ²rÌ²eÌ²sÌ²sÌ²eÌ²sÌ².)  That can
             lead to unexpected results in many cases of in-place editing, where
             using -ğ—¶ is desired.

     -ğ—¶[eÌ²xÌ²tÌ²eÌ²nÌ²sÌ²iÌ²oÌ²nÌ²]
             Edit files in-place similarly to -ğˆ, but treat each file indepenâ€
             dently from other files.  In particular, line numbers in each file
             start at 1, the â€œ$â€ address matches the last line of the current
             file, and address ranges are limited to the current file.  (See SÌ²eÌ²dÌ²
             AÌ²dÌ²dÌ²rÌ²eÌ²sÌ²sÌ²eÌ²sÌ².)  The net result is as though each file were edited by a
             separate ğ˜€ğ—²ğ—± instance.

     -ğ—¹      Make output line buffered.

     -ğ—»      By default, each line of input is echoed to the standard output afâ€
             ter all of the commands have been applied to it.  The -ğ—» option
             suppresses this behavior.

     -ğ—¿      Same as -ğ„ for compatibility with GNU sed.

     -ğ˜‚      Make output unbuffered.

     The form of a ğ˜€ğ—²ğ—± command is as follows:

           [address[,address]]function[arguments]

     Whitespace may be inserted before the first address and the function porâ€
     tions of the command.

     Normally, ğ˜€ğ—²ğ—± cyclically copies a line of input, not including its termiâ€
     nating newline character, into a pÌ²aÌ²tÌ²tÌ²eÌ²rÌ²nÌ² sÌ²pÌ²aÌ²cÌ²eÌ², (unless there is something
     left after a â€œDâ€ function), applies all of the commands with addresses that
     select that pattern space, copies the pattern space to the standard output,
     appending a newline, and deletes the pattern space.

     Some of the functions use a hÌ²oÌ²lÌ²dÌ² sÌ²pÌ²aÌ²cÌ²eÌ² to save all or part of the pattern
     space for subsequent retrieval.

   ğ’ğ—²ğ—± ğ€ğ—±ğ—±ğ—¿ğ—²ğ˜€ğ˜€ğ—²ğ˜€
     An address is not required, but if specified must have one of the following
     formats:

           â€¢   a number that counts input lines cumulatively across input files
               (or in each file independently if a -ğ—¶ option is in effect);

           â€¢   a dollar (â€œ$â€) character that addresses the last line of input
               (or the last line of the current file if a -ğ—¶ option was speciâ€
               fied);

           â€¢   a context address that consists of a regular expression preceded
               and followed by a delimiter.  The closing delimiter can also opâ€
               tionally be followed by the â€œiâ€ character, to indicate that the
               regular expression is to be matched in a case-insensitive way.

     A command line with no addresses selects every pattern space.

     A command line with one address selects all of the pattern spaces that
     match the address.

     A command line with two addresses selects an inclusive range.  This range
     starts with the first pattern space that matches the first address.  The
     end of the range is the next following pattern space that matches the secâ€
     ond address.  If the second address is a number less than or equal to the
     line number first selected, only that line is selected.  The number in the
     second address may be prefixed with a (â€œ+â€) to specify the number of lines
     to match after the first pattern.  In the case when the second address is a
     context address, ğ˜€ğ—²ğ—± does not re-match the second address against the patâ€
     tern space that matched the first address.  Starting at the first line folâ€
     lowing the selected range, ğ˜€ğ—²ğ—± starts looking again for the first address.

     Editing commands can be applied to non-selected pattern spaces by use of
     the exclamation character (â€œ!â€) function.

   ğ’ğ—²ğ—± ğ‘ğ—²ğ—´ğ˜‚ğ—¹ğ—®ğ—¿ ğ„ğ˜…ğ—½ğ—¿ğ—²ğ˜€ğ˜€ğ—¶ğ—¼ğ—»ğ˜€
     The regular expressions used in ğ˜€ğ—²ğ—±, by default, are basic regular expresâ€
     sions (BREs, see re_format(7) for more information), but extended (modern)
     regular expressions can be used instead if the -ğ„ flag is given.  In addiâ€
     tion, ğ˜€ğ—²ğ—± has the following two additions to regular expressions:

     1.   In a context address, any character other than a backslash (â€œ\â€) or
          newline character may be used to delimit the regular expression.  The
          opening delimiter needs to be preceded by a backslash unless it is a
          slash.  For example, the context address \xabcx is equivalent to
          /abc/.  Also, putting a backslash character before the delimiting
          character within the regular expression causes the character to be
          treated literally.  For example, in the context address \xabc\xdefx,
          the RE delimiter is an â€œxâ€ and the second â€œxâ€ stands for itself, so
          that the regular expression is â€œabcxdefâ€.

     2.   The escape sequence \n matches a newline character embedded in the
          pattern space.  You cannot, however, use a literal newline character
          in an address or in the substitute command.

     One special feature of ğ˜€ğ—²ğ—± regular expressions is that they can default to
     the last regular expression used.  If a regular expression is empty, i.e.,
     just the delimiter characters are specified, the last regular expression
     encountered is used instead.  The last regular expression is defined as the
     last regular expression used as part of an address or substitute command,
     and at run-time, not compile-time.  For example, the command â€œ/abc/s//XXX/â€
     will substitute â€œXXXâ€ for the pattern â€œabcâ€.

   ğ’ğ—²ğ—± ğ…ğ˜‚ğ—»ğ—°ğ˜ğ—¶ğ—¼ğ—»ğ˜€
     In the following list of commands, the maximum number of permissible adâ€
     dresses for each command is indicated by [0addr], [1addr], or [2addr], repâ€
     resenting zero, one, or two addresses.

     The argument tÌ²eÌ²xÌ²tÌ² consists of one or more lines.  To embed a newline in the
     text, precede it with a backslash.  Other backslashes in text are deleted
     and the following character taken literally.

     The â€œrâ€ and â€œwâ€ functions take an optional file parameter, which should be
     separated from the function letter by white space.  Each file given as an
     argument to ğ˜€ğ—²ğ—± is created (or its contents truncated) before any input
     processing begins.

     The â€œbâ€, â€œrâ€, â€œsâ€, â€œtâ€, â€œwâ€, â€œyâ€, â€œ!â€, and â€œ:â€ functions all accept addiâ€
     tional arguments.  The following synopses indicate which arguments have to
     be separated from the function letters by white space characters.

     Two of the functions take a function-list.  This is a list of ğ˜€ğ—²ğ—± functions
     separated by newlines, as follows:

           { function
             function
             ...
             function
           }

     The â€œ{â€ can be preceded by white space and can be followed by white space.
     The function can be preceded by white space.  The terminating â€œ}â€ must be
     preceded by a newline, and may also be preceded by white space.

     [2addr] function-list
             Execute function-list only when the pattern space is selected.

     [1addr]a\
     text    Write tÌ²eÌ²xÌ²tÌ² to standard output immediately before each attempt to
             read a line of input, whether by executing the â€œNâ€ function or by
             beginning a new cycle.

     [2addr]b[label]
             Branch to the â€œ:â€ function with the specified label.  If the label
             is not specified, branch to the end of the script.

     [2addr]c\
     text    Delete the pattern space.  With 0 or 1 address or at the end of a
             2-address range, tÌ²eÌ²xÌ²tÌ² is written to the standard output.

     [2addr]d
             Delete the pattern space and start the next cycle.

     [2addr]D
             Delete the initial segment of the pattern space through the first
             newline character and start the next cycle.

     [2addr]g
             Replace the contents of the pattern space with the contents of the
             hold space.

     [2addr]G
             Append a newline character followed by the contents of the hold
             space to the pattern space.

     [2addr]h
             Replace the contents of the hold space with the contents of the
             pattern space.

     [2addr]H
             Append a newline character followed by the contents of the pattern
             space to the hold space.

     [1addr]i\
     text    Write tÌ²eÌ²xÌ²tÌ² to the standard output.

     [2addr]l
             (The letter ell.)  Write the pattern space to the standard output
             in a visually unambiguous form.  This form is as follows:

                   backslash          \\
                   alert              \a
                   form-feed          \f
                   carriage-return    \r
                   tab                \t
                   vertical tab       \v

             Nonprintable characters are written as three-digit octal numbers
             (with a preceding backslash) for each byte in the character (most
             significant byte first).  Long lines are folded, with the point of
             folding indicated by displaying a backslash followed by a newline.
             The end of each line is marked with a â€œ$â€.

     [2addr]n
             Write the pattern space to the standard output if the default outâ€
             put has not been suppressed, and replace the pattern space with the
             next line of input.

     [2addr]N
             Append the next line of input to the pattern space, using an embedâ€
             ded newline character to separate the appended material from the
             original contents.  Note that the current line number changes.

     [2addr]p
             Write the pattern space to standard output.

     [2addr]P
             Write the pattern space, up to the first newline character to the
             standard output.

     [1addr]q
             Branch to the end of the script and quit without starting a new cyâ€
             cle.

     [1addr]r file
             Copy the contents of fÌ²iÌ²lÌ²eÌ² to the standard output immediately before
             the next attempt to read a line of input.  If fÌ²iÌ²lÌ²eÌ² cannot be read
             for any reason, it is silently ignored and no error condition is
             set.

     [2addr]s/regular expression/replacement/flags
             Substitute the replacement string for the first instance of the
             regular expression in the pattern space.  Any character other than
             backslash or newline can be used instead of a slash to delimit the
             RE and the replacement.  Within the RE and the replacement, the RE
             delimiter itself can be used as a literal character if it is preâ€
             ceded by a backslash.

             An ampersand (â€œ&â€) appearing in the replacement is replaced by the
             string matching the RE.  The special meaning of â€œ&â€ in this context
             can be suppressed by preceding it by a backslash.  The string â€œ\#â€,
             where â€œ#â€ is a digit, is replaced by the text matched by the correâ€
             sponding backreference expression (see re_format(7)).

             A line can be split by substituting a newline character into it.
             To specify a newline character in the replacement string, precede
             it with a backslash.

             The value of fÌ²lÌ²aÌ²gÌ²sÌ² in the substitute function is zero or more of
             the following:

                   NÌ²       Make the substitution only for the NÌ²'th occurrence of
                           the regular expression in the pattern space.

                   g       Make the substitution for all non-overlapping matches
                           of the regular expression, not just the first one.

                   p       Write the pattern space to standard output if a reâ€
                           placement was made.  If the replacement string is
                           identical to that which it replaces, it is still conâ€
                           sidered to have been a replacement.

                   w fÌ²iÌ²lÌ²eÌ²  Append the pattern space to fÌ²iÌ²lÌ²eÌ² if a replacement was
                           made.  If the replacement string is identical to that
                           which it replaces, it is still considered to have
                           been a replacement.

                   i or I  Match the regular expression in a case-insensitive
                           way.

     [2addr]t [label]
             Branch to the â€œ:â€ function bearing the label if any substitutions
             have been made since the most recent reading of an input line or
             execution of a â€œtâ€ function.  If no label is specified, branch to
             the end of the script.

     [2addr]w fÌ²iÌ²lÌ²eÌ²
             Append the pattern space to the fÌ²iÌ²lÌ²eÌ².

     [2addr]x
             Swap the contents of the pattern and hold spaces.

     [2addr]y/string1/string2/
             Replace all occurrences of characters in sÌ²tÌ²rÌ²iÌ²nÌ²gÌ²1Ì² in the pattern
             space with the corresponding characters from sÌ²tÌ²rÌ²iÌ²nÌ²gÌ²2Ì².  Any characâ€
             ter other than a backslash or newline can be used instead of a
             slash to delimit the strings.  Within sÌ²tÌ²rÌ²iÌ²nÌ²gÌ²1Ì² and sÌ²tÌ²rÌ²iÌ²nÌ²gÌ²2Ì², a backâ€
             slash followed by any character other than a newline is that litâ€
             eral character, and a backslash followed by an ``n'' is replaced by
             a newline character.

     [2addr]!function
     [2addr]!function-list
             Apply the function or function-list only to the lines that are nÌ²oÌ²tÌ²
             selected by the address(es).

     [0addr]:label
             This function does nothing; it bears a label to which the â€œbâ€ and
             â€œtâ€ commands may branch.

     [1addr]=
             Write the line number to the standard output followed by a newline
             character.

     [0addr]
             Empty lines are ignored.

     [0addr]#
             The â€œ#â€ and the remainder of the line are ignored (treated as a
             comment), with the single exception that if the first two characâ€
             ters in the file are â€œ#nâ€, the default output is suppressed.  This
             is the same as specifying the -ğ—» option on the command line.

ğ„ğğ•ğˆğ‘ğğğŒğ„ğğ“
     The COLUMNS, LANG, LC_ALL, LC_CTYPE and LC_COLLATE environment variables
     affect the execution of ğ˜€ğ—²ğ—± as described in environ(7).

ğ„ğ—ğˆğ“ ğ’ğ“ğ€ğ“ğ”ğ’
     The ğ˜€ğ—²ğ—± utility exits 0 on success, and >0 if an error occurs.

ğ’ğ„ğ„ ğ€ğ‹ğ’ğ
     awk(1), ed(1), grep(1), regex(3), re_format(7)

ğ’ğ“ğ€ğğƒğ€ğ‘ğƒğ’
     The ğ˜€ğ—²ğ—± utility is expected to be a superset of the IEEE Std 1003.2
     (â€œPOSIX.2â€) specification.

     The -ğ—®, -ğ„, -ğˆ, and -ğ—¶ options, the prefixing â€œ+â€ in the second member of
     an address range, as well as the â€œIâ€ flag to the address regular expression
     and substitution command are non-standard FreeBSD extensions and may not be
     available on other operating systems.

ğ‡ğˆğ’ğ“ğğ‘ğ˜
     A ğ˜€ğ—²ğ—± command, written by L. E. McMahon, appeared in Version 7 AT&T UNIX.

ğ€ğ”ğ“ğ‡ğğ‘ğ’
     Diomidis D. Spinellis <dds@FreeBSD.org>

ğğ”ğ†ğ’
     Multibyte characters containing a byte with value 0x5C (ASCII â€˜\â€™) may be
     incorrectly treated as line continuation characters in arguments to the
     â€œaâ€, â€œcâ€ and â€œiâ€ commands.  Multibyte characters cannot be used as delimâ€
     iters with the â€œsâ€ and â€œyâ€ commands.

BSD                               June 18, 2014                              BSD
